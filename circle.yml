machine:
  services:
    - docker

dependencies:
  pre:
    - pip install awsebcli

test:
  override:
    - mvn clean compile package

deployment:
  development:
    branch: ["dev", "circleci"]
    commands:
      - .deploy/dockerhub_push.sh dev $CIRCLE_BUILD_NUM
      - .deploy/ebs_deploy.sh tc-terms dev $CIRCLE_BUILD_NUM
  production:
    branch: master
    commands:
      - .deploy/dockerhub_push.sh prod $CIRCLE_BUILD_NUM
      - .deploy/ebs_deploy.sh tc-terms prod $CIRCLE_BUILD_NUM
